schema: '2.0'
stages:
  get_data:
    cmd: python scripts/data.py
    deps:
    - path: scripts/data.py
      hash: md5
      md5: 67c70db416a7cbb31fe2465ed2a1866b
      size: 1528
    params:
      params.yaml:
        index_col: flat_id
        table_name: real_estate_clean
    outs:
    - path: data/initial_data.csv
      hash: md5
      md5: 7ee6d070320f69c81d9b37495384e033
      size: 13234705
      cloud:
        my_storage:
          etag: 7ee6d070320f69c81d9b37495384e033
          version_id: 000615F435766D54
  fit_model:
    cmd: python scripts/fit.py
    deps:
    - path: data/initial_data.csv
      hash: md5
      md5: 7ee6d070320f69c81d9b37495384e033
      size: 13234705
    - path: scripts/fit.py
      hash: md5
      md5: 72a0bf08e92c36c1fdc43f1d0aab7a6a
      size: 2511
    params:
      params.yaml:
        cat_cols: []
        drop_cols:
        - id
        - building_id
        - flat_id
        one_hot_drop_bin: if_binary
        one_hot_drop_cat: first
        target_col: price
    outs:
    - path: models/fitted_model.pkl
      hash: md5
      md5: 274582c8cabee010c0095b496a338ecd
      size: 4718
      cloud:
        my_storage:
          etag: 274582c8cabee010c0095b496a338ecd
          version_id: 000615F43579DA05
  evaluate_model:
    cmd: python scripts/evaluate.py
    deps:
    - path: models/fitted_model.pkl
      hash: md5
      md5: 274582c8cabee010c0095b496a338ecd
      size: 4718
    - path: scripts/evaluate.py
      hash: md5
      md5: c445f6b12f53bcf9608b6557113a546e
      size: 1439
    params:
      params.yaml:
        metrics:
        - neg_mean_squared_error
        - r2
        n_jobs: -1
        n_splits: 5
        target_col: price
    outs:
    - path: cv_results/cv_res.json
      hash: md5
      md5: 40c0c54673de2f6861331cda75f63ffa
      size: 109
      cloud:
        my_storage:
          etag: 40c0c54673de2f6861331cda75f63ffa
          version_id: 000615F43579E808
